"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[230],{8193:(N,C,d)=>{d.d(C,{Z:()=>m});var s=d(9468),t=d(6814),Z=d(7818),S=d(8351),T=d(3946),b=d(95);function v(D,x){if(1&D){const l=s.EpF();s.TgZ(0,"span",18),s.NdJ("mouseenter",function(){const g=s.CHM(l).$implicit,_=s.oxw();return s.KtG(_.hoveredDate=g)})("mouseleave",function(){s.CHM(l);const p=s.oxw();return s.KtG(p.hoveredDate=null)}),s._uU(1),s.qZA()}if(2&D){const l=x.$implicit,u=x.focused,p=s.oxw();s.ekj("focused",u)("range",p.isRange(l))("faded",p.isHovered(l)||p.isInside(l)),s.xp6(1),s.hij(" ",l.day," ")}}let m=(()=>{class D{constructor(l){this.activeModal=l,this.calendar=(0,s.f3M)(T.vL),this.hoveredDate=null,this.fromDate=this.calendar.getToday(),this.toDate=this.calendar.getNext(this.fromDate,"d",-1),this.currentDate=new Date,this.startTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()},this.endTime={hour:this.currentDate.getHours(),minute:this.currentDate.getMinutes()}}ngOnInit(){console.log(this.inputData);const l=this.inputData.startDate,u=this.inputData.endDate;this.fromDate={year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate()},this.toDate={year:u.getFullYear(),month:u.getMonth()+1,day:u.getDate()};const p=l.getHours(),g=l.getMinutes(),_=u.getHours(),y=u.getMinutes();this.startTime={hour:p,minute:g},this.endTime={hour:_,minute:y}}onDateSelection(l){this.fromDate||this.toDate?this.fromDate&&!this.toDate&&l.after(this.fromDate)?this.toDate=l:(this.toDate=null,this.fromDate=l):this.fromDate=l}isHovered(l){return this.fromDate&&!this.toDate&&this.hoveredDate&&l.after(this.fromDate)&&l.before(this.hoveredDate)}isInside(l){return this.toDate&&l.after(this.fromDate)&&l.before(this.toDate)}isRange(l){return l.equals(this.fromDate)||this.toDate&&l.equals(this.toDate)||this.isInside(l)||this.isHovered(l)}selectDataAndClose(){this.activeModal.close({isUpdated:!0,dateData:{startDate:this.fromDate,endDate:this.toDate,startTime:this.startTime,endTime:this.endTime}})}closeModal(){this.activeModal.dismiss({isUpdated:!1})}static#t=this.\u0275fac=function(u){return new(u||D)(s.Y36(T.Kz))};static#e=this.\u0275cmp=s.Xpm({type:D,selectors:[["app-datatime-range-modal"]],inputs:{inputData:"inputData"},standalone:!0,features:[s.jDz],decls:26,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],["outsideDays","hidden",1,"range-datetimepicker",3,"displayMonths","dayTemplate","dateSelect"],["dp",""],["t",""],[1,"col-md-6","col-sm-6"],[3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-3","col-md-3","col-sm-6"],["type","button","ngbAutofocus","",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-check"],[1,"col-xl-4","col-md-3","col-sm-6"],["type","button",1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"fas","fa-times"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(u,p){if(1&u&&(s.TgZ(0,"div",0)(1,"h6",1),s._uU(2,"Select Date"),s.qZA(),s.TgZ(3,"button",2),s.NdJ("click",function(){return p.closeModal()}),s.TgZ(4,"span",3),s._uU(5,"\xd7"),s.qZA()()(),s.TgZ(6,"div",4)(7,"div",5)(8,"ngb-datepicker",6,7),s.NdJ("dateSelect",function(_){return p.onDateSelection(_)}),s.qZA(),s.YNc(10,v,2,7,"ng-template",null,8,s.W1O),s.qZA(),s.TgZ(12,"div",5)(13,"div",9)(14,"ngb-timepicker",10),s.NdJ("ngModelChange",function(_){return p.startTime=_}),s.qZA()(),s.TgZ(15,"div",9)(16,"ngb-timepicker",10),s.NdJ("ngModelChange",function(_){return p.endTime=_}),s.qZA()()(),s.TgZ(17,"div",11)(18,"div",12)(19,"button",13),s.NdJ("click",function(){return p.selectDataAndClose()}),s._UZ(20,"i",14),s._uU(21," Apply "),s.qZA()(),s.TgZ(22,"div",15)(23,"button",16),s.NdJ("click",function(){return p.closeModal()}),s._UZ(24,"i",17),s._uU(25," Cancel "),s.qZA()()()()),2&u){const g=s.MAs(11);s.xp6(8),s.Q6J("displayMonths",2)("dayTemplate",g),s.xp6(6),s.Q6J("ngModel",p.startTime),s.xp6(2),s.Q6J("ngModel",p.endTime)}},dependencies:[t.ez,Z.m,b.JJ,b.On,T.VL,T.Pm,S.Qf],styles:[".modal-title{font-style:normal;font-weight:400}  .modal-header{padding:10px}  .close{border-radius:50%;padding:0 8px;border-color:#666}  .modal-row-border{border-color:#ced4da;border-style:solid;border-width:.8px;border-radius:5px;padding:10px;margin:20px 10px}  .ml-10{margin-left:10px}  .mb-5{margin-bottom:5px}  .custom-day{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}  .custom-day.focused{background-color:#e6e6e6}  .custom-day.range,   .custom-day:hover{background-color:#0275d8;color:#fff}  .custom-day.faded{background-color:#0275d880}  .range-datetimepicker{overflow-x:scroll}@media only screen and (max-width: 768px){  .col-sm-6{width:50%}}"]})}return D})()},3230:(N,C,d)=>{d.r(C),d.d(C,{NgbdSortableHeaderDirective:()=>P,default:()=>O});var s=d(6814),t=d(9468),Z=d(7818),S=d(8193),T=d(3946),b=d(589),v=d(7911),m=d(95);let D=(()=>{class r{constructor(e,a,o){this.activeModal=e,this.projectService=a,this.toastService=o,this.headers=[],this.value=[]}testSubmit(){this.headers=[],this.value=[];const e=this.inputData.xcldata.filter(n=>n.ProjectId==this.inputData.projectId);this.headers=Object.keys(e[0]),this.value=Object.values(e[0]);let a=[];a=[this.buName,this.productName,this.productSize,this.remarks],this.value=this.value.concat(a),this.headers=this.headers.concat(["BU Name","ProductName","Product Size","Remarks"]),this.projectService.getAttach(this.inputData.projectId,this.headers,this.value,this.inputData.testset,this.inputData.fromDate,this.inputData.toDate).subscribe(n=>{const i=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=document.createElement("a");c.href=window.URL.createObjectURL(i);const f=new Date,M=`NPD-ProjectReport ${f.getDate()}-${f.getMonth()}-${f.getFullYear()}`;c.download=`${M}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c)})}selectDataAndClose(){this.testSubmit(),this.activeModal.close({isSearch:!0,data:"successs"})}closeModal(){this.activeModal.dismiss({isSearch:!1})}static#t=this.\u0275fac=function(a){return new(a||r)(t.Y36(T.Kz),t.Y36(b.Y),t.Y36(v.k))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-report-export-modal"]],inputs:{inputData:"inputData"},decls:34,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"form-group"],["for",""],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","remark",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","justify-content-end"],[1,"col-xl-2","col-md-2","px-0"],["type","button","ngbAutofocus","",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-check"],[1,"col-xl-2","col-md-2"],["type","button",1,"btn","btn-block","btn-primary","mb-4","custom-btn",3,"click"],[1,"fas","fa-times"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"h6",1),t._uU(2,"Extra Fields"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.closeModal()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"form")(9,"div",6)(10,"label",7),t._uU(11,"BU Name:"),t.qZA(),t.TgZ(12,"input",8),t.NdJ("ngModelChange",function(i){return o.buName=i}),t.qZA()(),t.TgZ(13,"div",6)(14,"label",7),t._uU(15,"Product Name:"),t.qZA(),t.TgZ(16,"input",8),t.NdJ("ngModelChange",function(i){return o.productName=i}),t.qZA()(),t.TgZ(17,"div",6)(18,"label",7),t._uU(19,"Product Size:"),t.qZA(),t.TgZ(20,"input",8),t.NdJ("ngModelChange",function(i){return o.productSize=i}),t.qZA()(),t.TgZ(21,"div",6)(22,"label",7),t._uU(23,"Remarks:"),t.qZA(),t.TgZ(24,"textarea",9),t.NdJ("ngModelChange",function(i){return o.remarks=i}),t.qZA()()()(),t.TgZ(25,"div",10)(26,"div",11)(27,"button",12),t.NdJ("click",function(){return o.selectDataAndClose()}),t._UZ(28,"i",13),t._uU(29," Submit "),t.qZA()(),t.TgZ(30,"div",14)(31,"button",15),t.NdJ("click",function(){return o.closeModal()}),t._UZ(32,"i",16),t._uU(33," Cancel "),t.qZA()()()()),2&a&&(t.xp6(12),t.Q6J("ngModel",o.buName),t.xp6(4),t.Q6J("ngModel",o.productName),t.xp6(4),t.Q6J("ngModel",o.productSize),t.xp6(4),t.Q6J("ngModel",o.remarks))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F]})}return r})();var x=d(9074),l=d(220);function u(r,h){if(1&r&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&r){const e=h.$implicit,a=t.oxw();t.Q6J("value",e)("disabled",a.isDisabledColSelect(e)),t.xp6(1),t.hij("",e," ")}}function p(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",27),t._uU(1),t.TgZ(2,"span",28),t.NdJ("click",function(){const n=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.removeTag(n))}),t._UZ(3,"i",29),t.qZA()()}if(2&r){const e=h.$implicit;t.xp6(1),t.hij(" ",e," ")}}const g=function(r){return{"bg-secondary":r}};function _(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"tr",49),t.NdJ("click",function(){const o=t.CHM(e),n=o.$implicit,i=o.index,c=t.oxw(2);return t.KtG(c.handleRowClick(n.ProjectId,i))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()()}if(2&r){const e=h.$implicit,a=h.index,o=t.oxw(2);t.Q6J("ngClass",t.VKq(19,g,a===o.selectedRow)),t.xp6(2),t.Oqu(null==e?null:e.ProjectId),t.xp6(2),t.Oqu(null==e?null:e.ProjectName),t.xp6(2),t.Oqu(null==e?null:e.TestBenchNo),t.xp6(2),t.Oqu(null==e?null:e.ProjectType),t.xp6(2),t.Oqu(null==e?null:e.ProjectNo),t.xp6(2),t.Oqu(null==e?null:e.ProjectOwner),t.xp6(2),t.Oqu(null==e?null:e.TestNo),t.xp6(2),t.Oqu(t.Dn7(17,11,null==e?null:e.StartDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(t.Dn7(20,15,null==e?null:e.EndDateTime,"dd/MM/yyyy HH:mm:ss","UTC")),t.xp6(3),t.Oqu(null==e?null:e.differnce)}}function y(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"app-card",30)(2,"div",31)(3,"button",32),t._UZ(4,"i",33),t._uU(5," Export "),t.qZA()(),t.TgZ(6,"div",34)(7,"table",35)(8,"thead")(9,"tr")(10,"th",36),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(11,"Project Id"),t.qZA(),t.TgZ(12,"th",37),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(13,"Project Name"),t.qZA(),t.TgZ(14,"th",38),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(15,"Test Bench"),t.qZA(),t.TgZ(16,"th",39),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(17,"Project Type"),t.qZA(),t.TgZ(18,"th",40),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(19,"Project No."),t.qZA(),t.TgZ(20,"th",41),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(21,"Owner"),t.qZA(),t.TgZ(22,"th",42),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(23,"Test Run No."),t.qZA(),t.TgZ(24,"th",43),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(25,"Start Time"),t.qZA(),t.TgZ(26,"th",44),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(27,"End Time"),t.qZA(),t.TgZ(28,"th",45),t.NdJ("sort",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onSort(o))}),t._uU(29,"Total Run Time"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,_,23,21,"tr",46),t.qZA()(),t.TgZ(32,"div",47)(33,"span"),t._uU(34),t.qZA(),t.TgZ(35,"ngb-pagination",48),t.NdJ("pageChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.handlePageChange(o))})("pageChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.page=o)}),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("hidHeader",!0)("options",!1),t.xp6(30),t.Q6J("ngForOf",e.selectedTableData),t.xp6(3),t.AsE("Page ",(e.page-1)*e.pageSize+1," - ",e.page*e.pageSize>e.tableData.length?e.tableData.length:e.page*e.pageSize," "),t.xp6(1),t.Q6J("pageSize",e.pageSize)("collectionSize",null==e.tableData?null:e.tableData.length)("page",e.page)}}function w(r,h){if(1&r&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&r){const e=h.$implicit;t.xp6(1),t.Oqu(e)}}function k(r,h){if(1&r&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&r){const e=h.$implicit,a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a[e]," ")}}function U(r,h){if(1&r&&(t.TgZ(0,"tr"),t.YNc(1,k,2,1,"td",57),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.displayedColumns)}}function J(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"app-card",50)(2,"div",51)(3,"div",52),t._UZ(4,"i",53),t.TgZ(5,"input",54),t.NdJ("ngModelChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.tbSearchFilter=o)})("keyup",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSearchChange())}),t.qZA()(),t.TgZ(6,"button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openModal())}),t._UZ(7,"i",56),t._uU(8," Export "),t.qZA()(),t.TgZ(9,"div",34)(10,"table",35)(11,"thead")(12,"tr"),t.YNc(13,w,2,1,"th",57),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,U,2,1,"tr",57),t.qZA()(),t.TgZ(16,"div",47)(17,"ngb-pagination",58),t.NdJ("pageChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.page2=o)})("pageChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.handlePageChange2(o))}),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("hidHeader",!0),t.xp6(4),t.Q6J("ngModel",e.tbSearchFilter),t.xp6(8),t.Q6J("ngForOf",e.displayedColumns),t.xp6(2),t.Q6J("ngForOf",e.selectedAnalysisData),t.xp6(2),t.Q6J("collectionSize",e.analysisData.length)("page",e.page2)("maxSize",5)("rotate",!0)("ellipses",!0)("boundaryLinks",!0)}}const q={asc:"desc",desc:"","":"asc"};let P=(()=>{class r{constructor(){this.appSortable="",this.direction="",this.sort=new t.vpe}rotate(){console.log(this.direction),this.direction=q[this.direction],this.sort.emit({column:this.appSortable,direction:this.direction})}static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275dir=t.lG2({type:r,selectors:[["th","appSortable",""]],hostVars:4,hostBindings:function(a,o){1&a&&t.NdJ("click",function(){return o.rotate()}),2&a&&t.ekj("asc","asc"===o.direction)("desc","desc"===o.direction)},inputs:{appSortable:"appSortable",direction:"direction"},outputs:{sort:"sort"},standalone:!0})}return r})(),O=(()=>{class r{constructor(e,a,o,n){this.modalService=e,this.headerService=a,this.projectService=o,this.toastService=n,this.xcldata=[],this.selectedTableData=[],this.tableData=[],this.tempTableData=[],this.page=1,this.page2=1,this.pageSize=5,this.tbSearchFilter="",this.toppings="",this.selectedValues=[],this.dataSet1=[],this.testset=[],this.time=[],this.click=-1,this.analysisData=[],this.selectedAnalysisData=[],this.displayedColumns=[],this.type="all",this.AoodItem=["StrokeCount","FcvSP","FlowGrav","WeightScaleRead","DischargeFlow","StrokeCountRate","DischargePressureSP","InAirPressSP","FcvPos","DischargePressurePV","AoddInAirPressPV","SuctionPressurePV"],this.EoddItem=["MotorKWH","FcvSP","Act_MotorRPM","MotorAMP","MotorKW","FlowGrav","WeightScaleRead","DischargeFlow","Set_MotorRPM","DischargePressureSP","FcvPos","DischargePressurePV","SuctionPressurePV","PumpRPM"],this.All=["StrokeCount","MotorKWH","FcvSP","StrokeCountRate","Act_MotorRPM","InAirPressSP","MotorAMP","MotorKW","FlowGrav","WeightScaleRead","AoddInAirPressPV","DischargeFlow","Set_MotorRPM","DischargePressureSP","FcvPos","DischargePressurePV","SuctionPressurePV","PumpRPM"],this.columnNames=this.All,this.headerService.setHeaderName("Project Report")}ngOnInit(){this.fromDate=new Date,this.toDate=new Date,this.formatTimeModalDate()}getTestData(){const e=this.jsStartDate,a=this.jsEndDate,o=this.type;let n=[];this.tableData=[],this.selectedTableData=[],this.tempTableData=[],this.analysisData=[],this.selectedAnalysisData=[],this.selectedRow=-1,this.selectedValues&&this.selectedValues.length?e&&a&&o&&this.projectService.getListView(e,a).subscribe(i=>{this.xcldata=i.data,console.log(i),console.log(o),"all"==o?n=i.data:(n=i.data.filter(c=>c.ProjectType.toLowerCase()===o),n.length<=0&&this.toastService.show({template:"No Data Available!!",classname:"bg-danger",delay:3e3})),this.tableData=n,this.tempTableData=n,console.log(this.tableData),this.sliceTableData(this.page)}):this.toastService.show({template:"Please select the columns",classname:"bg-warning",delay:3e3})}getAnalysisData(e){this.dataSet1=[],this.time=[],this.testset=this.selectedValues.map(a=>a),this.testset.forEach(a=>{this.dataSet1.push({seriesname:a,data:[]})}),this.projectService.getAnalysisData(e,this.jsStartDate,this.jsEndDate,this.testset).subscribe(a=>{a&&a.length>0&&(this.analysisData=a,this.sliceAnalysisData(this.page2),this.displayedColumns=Object.keys(a[0]),a.forEach(o=>{Object.keys(o).forEach(n=>{const i=this.dataSet1.find(c=>c.seriesname===n);i&&i.data.push({value:o[n]}),"datetime"==n&&this.time.push({label:o.datetime})})}))})}onTypeChange(){"eodd"===this.type?(this.selectedValues=[],this.columnNames=this.EoddItem):"aodd"===this.type?(this.selectedValues=[],this.columnNames=this.AoodItem):"all"==this.type&&(this.selectedValues=[],this.columnNames=this.All)}handleRowClick(e,a){this.selectedRow=a,this.projectId=e,console.log("here"),this.getAnalysisData(e),this.click=e}handlePageChange(e){this.sliceTableData(e)}handlePageChange2(e){this.sliceAnalysisData(e)}handleSearchChange(){this.filterAnalysisData(this.tbSearchFilter)}onColSelectChange(){this.selectedValues.includes(this.toppings)||this.selectedValues.push(this.toppings)}removeTag(e){this.selectedValues=this.selectedValues.filter(a=>a!==e)}onSelectionChange(){this.getTestData()}isDisabledColSelect(e){return this.selectedValues.includes(e)}openDateTimeModal(){const o={startDate:this.fromDate,endDate:this.toDate},n=this.modalService.open(S.Z);n.componentInstance.inputData=o,n.result.then(i=>{const f=new Intl.DateTimeFormat("en-US",{year:"2-digit",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),A=new Date(i.dateData.startDate.year,i.dateData.startDate.month-1,i.dateData.startDate.day,i.dateData.startTime.hour,i.dateData.startTime.minute,0),M=f.format(A),j=new Date(i.dateData.endDate.year,i.dateData.endDate.month-1,i.dateData.endDate.day,i.dateData.endTime.hour,i.dateData.endTime.minute,0),R=f.format(j);console.log(M+" - "+R),this.formattedDateTimeRange=M+" - "+R,this.jsStartDate=A,this.jsEndDate=j,this.jsStartDate=this.formatDate(this.jsStartDate),this.jsEndDate=this.formatDate(this.jsEndDate)},i=>{console.log(`Modal dismissed with: ${i}`)})}openModal(){const e={projectId:this.projectId,xcldata:this.xcldata,testset:this.testset,fromDate:this.jsStartDate,toDate:this.jsEndDate},a=this.modalService.open(D,{size:"lg"});a.componentInstance.inputData=e,a.result.then(o=>{console.log(o),1==o.isSearch&&console.log(o)},o=>{console.log(`Modal dismissed with: ${JSON.stringify(o)}`)})}onSort({column:e,direction:a}){if(this.headers)for(const o of this.headers)o.appSortable!==e&&(o.direction="");""===a||""===e?(this.tableData=this.tempTableData,this.sliceTableData(this.page)):(this.tableData=[...this.tempTableData].sort((o,n)=>{const i=((r,h)=>r<h?-1:r>h?1:0)(o[e],n[e]);return"asc"===a?i:-i}),this.sliceTableData(this.page))}formatTimeModalDate(){const a=new Intl.DateTimeFormat("en-US",{hourCycle:"h24",year:"2-digit",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),n=a.format(this.toDate),i=this.fromDate;i.setMonth(i.getMonth()-1);const c=a.format(i);this.jsStartDate=this.formatDate(this.fromDate),this.jsEndDate=this.formatDate(this.toDate),console.log(c+" - "+n),this.formattedDateTimeRange=c+" - "+n}sliceTableData(e){this.selectedTableData=this.tableData.slice((e-1)*this.pageSize,e*this.pageSize)}sliceAnalysisData(e){this.selectedAnalysisData=this.analysisData.slice((e-1)*this.pageSize,e*this.pageSize)}filterAnalysisData(e){console.log(e);const a=this.analysisData.filter(o=>{if(Object.entries(o).some(c=>{let f=c[1].toString();return e.startsWith("Test Bench")&&"TestBenchNo"==c[0]&&(f="Test Bench "+f),f.toLowerCase().includes(e.toLowerCase())}))return o});this.selectedAnalysisData=a}getCurrentDateTime(){return this.formatDate(new Date)}formatDate(e){return`${e.getFullYear()}-${this.padZero(e.getMonth()+1)}-${this.padZero(e.getDate())}T${this.padZero(e.getHours())}:${this.padZero(Math.abs(e.getMinutes()))}`}padZero(e){return e<10?`0${e}`:`${e}`}static#t=this.\u0275fac=function(a){return new(a||r)(t.Y36(T.FF),t.Y36(x.r),t.Y36(b.Y),t.Y36(v.k))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-project-report"]],viewQuery:function(a,o){if(1&a&&t.Gf(P,5),2&a){let n;t.iGM(n=t.CRH())&&(o.headers=n)}},standalone:!0,features:[t.jDz],decls:35,vars:9,consts:[[1,"project-report"],[1,"col-md-12","parameterTrendView","mt-3"],["cardTitle","Parameter Trend View",3,"options","hidHeader"],[1,"row","d-flex","justify-content-between"],[1,"col-md-5","col-sm-12","d-flex","align-items-start"],[1,"d-flex","justify-content-end","dateRangePicker"],[1,"custom-datetime-range-span",3,"click"],[1,"fas","fa-calendar"],[1,"col-md-2","form-group","col-sm-12"],[1,"form-group","d-flex","gap-2","align-items-center"],["for",""],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","all"],["value","eodd"],["value","aodd"],[1,"col-md-4","col-sm-12"],[1,"form-group"],["value","","disabled","","selected",""],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-12"],["type","button",1,"btn","btn-primary","p-1","px-3","text-center","btn-apply",2,"font-size","13px",3,"click"],[1,"col-12","col-sm-12","d-flex","align-items-start"],[1,"col-md-12"],[1,"tag-input"],["class","tag",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","disabled"],[1,"tag"],[1,"remove",3,"click"],[1,"fas","fa-times"],[3,"hidHeader","options"],[1,"export","d-flex","justify-content-end"],[1,"btn","btn-success"],[1,"fa","fa-file-csv","fw-bolder"],[1,"table-responsive"],[1,"table","table-styling"],["appSortable","ProjectId",3,"sort"],["appSortable","ProjectName",3,"sort"],["appSortable","TestBenchNo",3,"sort"],["appSortable","ProjectType",3,"sort"],["appSortable","ProjectNo",3,"sort"],["appSortable","ProjectOwner",3,"sort"],["appSortable","TestNo",3,"sort"],["appSortable","StartDateTime",3,"sort"],["appSortable","EndDateTime",3,"sort"],["appSortable","differnce",3,"sort"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"m-0",3,"pageSize","collectionSize","page","pageChange"],[3,"ngClass","click"],[3,"hidHeader"],[1,"export","d-flex","justify-content-between"],[1,"searchbar","col-md-4"],[1,"feather","icon","icon-search"],["type","text","name","","id","","placeholder","Search Project Name, Num, Owner, Type...",3,"ngModel","ngModelChange","keyup"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-csv"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),t.NdJ("click",function(){return o.openDateTimeModal()}),t._UZ(7,"i",7),t._uU(8),t.qZA()()(),t.TgZ(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"select",11),t.NdJ("ngModelChange",function(i){return o.type=i})("change",function(){return o.onTypeChange()}),t.TgZ(14,"option",12),t._uU(15,"All"),t.qZA(),t.TgZ(16,"option",13),t._uU(17,"EODD"),t.qZA(),t.TgZ(18,"option",14),t._uU(19,"AODD"),t.qZA()()()(),t.TgZ(20,"div",15)(21,"div",16)(22,"select",11),t.NdJ("ngModelChange",function(i){return o.toppings=i})("change",function(){return o.onColSelectChange()}),t.TgZ(23,"option",17),t._uU(24,"Select Column names"),t.qZA(),t.YNc(25,u,2,3,"option",18),t.qZA()()(),t.TgZ(26,"div",19)(27,"button",20),t.NdJ("click",function(){return o.onSelectionChange()}),t._uU(28,"Apply"),t.qZA()()(),t.TgZ(29,"div",21)(30,"div",22)(31,"div",23),t.YNc(32,p,4,1,"div",24),t.qZA()()()()(),t.YNc(33,y,36,8,"div",25),t.YNc(34,J,18,10,"div",25),t.qZA()),2&a&&(t.xp6(2),t.Q6J("options",!1)("hidHeader",!0),t.xp6(6),t.hij(" ",o.formattedDateTimeRange," "),t.xp6(5),t.Q6J("ngModel",o.type),t.xp6(9),t.Q6J("ngModel",o.toppings),t.xp6(3),t.Q6J("ngForOf",o.columnNames),t.xp6(7),t.Q6J("ngForOf",o.selectedValues),t.xp6(1),t.Q6J("ngIf",o.tableData&&o.tableData.length),t.xp6(1),t.Q6J("ngIf",o.analysisData&&o.analysisData.length))},dependencies:[s.ez,s.mk,s.sg,s.O5,s.uU,Z.m,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.On,l.A,T.N9,P],styles:[".searchbar{background-color:#ddd;padding:2px 8px;display:flex;align-items:center;border-radius:20px;max-height:26px}  .searchbar .feather{font-size:15px}  .searchbar input{flex:1;background-color:transparent;border:0;outline:0}  .custom-datetime-range-span{padding:2px 8px;border:solid 1px rgb(206,212,218);border-radius:20px}  .custom-datetime-range-span i{margin-right:15px}  .card .card-body{padding:10px 8px!important}  .btn-apply{padding:2px 8px!important;margin-left:5px}  select.form-control{background-color:#e4e4e4!important;line-height:15px}  select.form-control option:disabled{color:#878787}  .tag-input{display:flex;flex-wrap:wrap;align-items:center;margin:0}  .tag{background-color:#6c757d;color:#fff;padding:6px 8px;margin:0 4px;display:flex;align-items:center;border-radius:20px;font-size:10px}  .remove{cursor:pointer;margin-left:4px;font-weight:700}"]})}return r})()}}]);