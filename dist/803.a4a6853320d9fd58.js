"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[803],{803:(Z,l,r)=>{r.r(l),r.d(l,{default:()=>v});var c=r(6814),m=r(7818),p=r(8642),i=r(95),t=r(9468),u=r(7635),g=r(7911);function h(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"form",14)(1,"h4",15),t._uU(2,"Signin"),t.qZA(),t.TgZ(3,"div",16)(4,"span",17),t._UZ(5,"i",18),t.qZA(),t._UZ(6,"input",19),t.qZA(),t.TgZ(7,"div",20)(8,"span",21),t._UZ(9,"i",22),t.qZA(),t._UZ(10,"input",23),t.qZA(),t.TgZ(11,"div",24)(12,"div",25),t._UZ(13,"input",26),t.TgZ(14,"label",27),t._uU(15," Save credentials"),t.qZA()()(),t.TgZ(16,"div",28)(17,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.signIn())}),t._uU(18,"Signin"),t.qZA()(),t.TgZ(19,"a",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.togglePopup())}),t._uU(20,"Forgot password?"),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.loginForm)}}function _(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",31)(1,"form",32)(2,"h1",33),t._uU(3,"Forgot Password?"),t.qZA(),t.TgZ(4,"h5",34),t._uU(5,"Please enter your Username."),t.qZA(),t.TgZ(6,"div",35)(7,"input",36),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.inputText=o)}),t.qZA()(),t.TgZ(8,"div",37)(9,"div",38)(10,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClose())}),t._uU(11,"Close"),t.qZA()()()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.forgotForm),t.xp6(6),t.Q6J("ngModel",e.inputText)}}function f(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",31)(1,"form",32)(2,"h1",33),t._uU(3,"Sign in"),t.qZA(),t.TgZ(4,"h4",34),t._uU(5,"Please fill in your information below"),t.qZA(),t.TgZ(6,"div",35),t._UZ(7,"input",40),t.qZA(),t.TgZ(8,"div",35),t._UZ(9,"input",41),t.qZA(),t.TgZ(10,"div",35),t._UZ(11,"input",42),t.qZA(),t.TgZ(12,"div",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onResetPassword())}),t.TgZ(13,"button",44),t._uU(14,"Reset "),t._UZ(15,"i",45),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.resetForm)}}let v=(()=>{class s{constructor(e,n,o,a){this.router=e,this.authServiceService=n,this.fb=o,this.toastService=a,this.inputText="",this.uname="",this.password="",this.showPopup=!1,this.resetPopup=!1,this.loginForm=o.group({uname:["",[i.kI.required]],password:["",[i.kI.required,i.kI.min(3)]]})}ngOnInit(){this.forgotForm=this.fb.group({userName:[""]}),this.resetForm=this.fb.group({otp:[""],password:[""],cpassword:[""]})}signIn(){this.loginForm.valid?this.authServiceService.authUser(this.loginForm.value).subscribe({next:e=>{console.log(e),1==e.success?(localStorage.setItem("loggedUser",JSON.stringify(e.user)),localStorage.setItem("authToken",e.token),this.router.navigate(["/analytics"])):alert(e.message)}}):console.log(this.loginForm)}togglePopup(){null==this.loginForm.value.uname||""==this.loginForm.value.uname?this.toastService.show({template:"Please fill the username field!",classname:"bg-danger",delay:3e3}):this.onForgotPassword(this.loginForm.value.uname),this.inputText=this.showPopup?this.loginForm.get("uname")?.value:""}onForgotPassword(e){this.forgotForm.value&&this.authServiceService.forgotPassword(e).subscribe(n=>{this.forgotData=n,200==this.forgotData.Status?(this.toastService.show({template:"Please change your password...",classname:"bg-info",delay:3e3}),this.showPopup=!this.showPopup,this.resetPopup=!this.resetPopup):401==this.forgotData.Status&&this.toastService.show({template:"User Not Found!",classname:"bg-danger",delay:3e3}),this.otp=n.response.otp,this.id=n.id})}onResetPassword(){if(this.resetForm.value){const e=this.resetForm.get("password")?.value;if(this.resetForm.get("otp")?.value==this.otp){const o=new Date;o.setHours(o.getHours()+5),o.setMinutes(o.getMinutes()+30),this.authServiceService.resetPassword(e,this.id,o).subscribe(()=>{this.router.navigate(["/logIn"]),location.reload()})}else this.toastService.show({template:"Please verify the otp",classname:"bg-warning",delay:3e3})}console.log(this.resetForm.value)}onClose(){location.reload(),this.showPopup=!0}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(p.F0),t.Y36(u.u),t.Y36(i.qu),t.Y36(g.k))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-sign-in"]],standalone:!0,features:[t.jDz],decls:15,vars:3,consts:[[1,"auth-wrapper"],[1,"auth-content","container"],[1,"card","p-0"],[1,"row","align-items-center","text-center"],[1,"col-md-4","p-0","dv-login-img"],["src","assets/images/login-left.png","width","100%","alt",""],[1,"col-md-8","d-flex","justify-content-center","m-dv-login"],[1,"card-body","w-25"],[1,"logo","d-flex","gap-5","justify-content-center"],["src","assets/images/IDEX Logo.png","width","130","alt","",2,"object-fit","contain"],[1,"logo-bg"],["src","assets/images/AVISHKAR LAB.png","width","120","alt",""],[3,"formGroup",4,"ngIf"],["class","d-flex",4,"ngIf"],[3,"formGroup"],[1,"mb-3","f-w-400"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"feather","icon-mail"],["type","email","placeholder","Email address","aria-label","Username","formControlName","uname",1,"form-control"],[1,"input-group","mb-4"],["id","basic-addon3",1,"input-group-text"],[1,"feather","icon-lock"],["type","password","placeholder","Password","aria-label","Password","formControlName","password",1,"form-control"],[1,"form-group","text-start","mt-2"],[1,"checkbox","checkbox-primary","d-inline"],["type","checkbox","name","checkbox-fill-1","id","checkbox-fill-a1","checked",""],["for","checkbox-fill-a1",1,"cr"],[1,"d-grid"],[1,"btn","btn-block","btn-primary","mb-4",3,"click"],[1,"mb-2","text-muted","btn","btn-link",3,"click"],[1,"d-flex"],[2,"max-width","100%",3,"formGroup"],[1,"fw-bold","mb-1","pb-1",2,"letter-spacing","1px"],[1,"fw-bold"],[1,"form-outline","mb-3"],["type","email","id","form2Example18","formControlName","userName",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center"],[1,"d-grid","gap-2","justify-content-md-end","d-flex"],["type","submit",1,"btn","btn-secondary","btn-lg",3,"click"],["type","string","id","form2Example18","placeholder","OTP","formControlName","otp",1,"form-control","form-control"],["type","password","id","form2Example28","placeholder","Password","formControlName","password",1,"form-control","form-control"],["type","password","id","cpassword","placeholder","re-password","formControlName","cpassword",1,"form-control","form-control"],[1,"d-grid","justify-content-md-end",3,"click"],["type","submit",1,"btn","btn-primary","btn-lg"],[1,"bi","bi-chevron-right","p-1"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7)(8,"div",8),t._UZ(9,"img",9),t.TgZ(10,"div",10),t._UZ(11,"img",11),t.qZA()(),t.YNc(12,h,21,1,"form",12),t.YNc(13,_,12,2,"div",13),t.YNc(14,f,16,1,"div",13),t.qZA()()()()()()),2&n&&(t.xp6(12),t.Q6J("ngIf",!o.showPopup),t.xp6(1),t.Q6J("ngIf",o.showPopup&&!o.resetPopup),t.xp6(1),t.Q6J("ngIf",o.resetPopup))},dependencies:[c.ez,c.O5,m.m,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,p.Bz],styles:["@media only screen and (max-width: 768px){  .dv-login-img{display:none}}"]})}return s})()}}]);